{% extends "master.html" %}

{% block content %}
  <div class="container" style="padding-top:20px;">

    <div class="row">
      <div class="col">
        <h2>My todo list</h2>
      </div>
      <div class="col-md-4 offset-md-6">
        <a href="/create" class="btn btn-primary">Add Task</a>
      </div>
    </div>

    <div class="row">
      <table class="table table-striped">
        <thead>
          <th>ID</th>
          <th>Short Dscription</th>
          <th>Description</th>
          <th>Completed</th>
          <th>Created at</th>
          <th>Action</th>
        </thead>
        <tbody>
          {% for task in tasks %}
            <tr>
              <td>{{ task[0] }}</td>
              <td>
                <a href="/edit?id={{task[0]}}">{{ task[1] }}</a>
              </td>
              <td>{{ task[2] }}</td>
              <td>
                {% if task[3] %}
                  <span style="color: green; font-weight:bold">Completed</span>
                {% else %}
                  <span style="color: red; font-weight:bold">Incomplete</span>
                {% endif %}
              </td>
              <td>{{ task[4] }}</td>
              <td>
                <a href="/delete?id={{ task[0] }}" class="btn btn-danger" id="delete">Delete</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
{% endblock %}

{% block script %}
  <script>
    document.getElementById("delete").addEventListener("click", function(e){
      if(!confirm("Are you sure you want to delete this task?")){
        e.preventDefault()
      }
      
    })
  </script>
{% endblock %}